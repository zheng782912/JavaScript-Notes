# 执行上下文  

在JavaScript中有三种代码运行环境:  
    
* Global Code  
　　JavaScript代码开始运行的默认环境  
* Function Code  
　　代码进入一个JavaScript函数  
* Eval Code  
　　使用eval()执行代码  

为了表示不同的运行环境，JavaScript中有一个`执行上下文（Execution context，EC）`的概念。也就是说，当JavaScript代码执行的时候，会进入不同的执行上下文，这些执行上下文就构成了一个`执行上下文栈（Execution context stack，ECS）`。

例如对如下面的JavaScript代码:  
```javascript
var a = "global var";

function foo(){
    console.log(a);
}

function outerFunc(){
    var b = "var in outerFunc";
    console.log(b);
    
    function innerFunc(){
        var c = "var in innerFunc";
        console.log(c);
        foo();
    }
    innerFunc();
}

outerFunc()

//var in outerFunc
//var in innerFunc
//global var
```
代码首先进入Global Execution Context，然后依次进入outerFunc，innerFunc和foo的执行上下文，执行上下文栈就可以表示为:  
![](https://raw.githubusercontent.com/zheng782912/Javascript-study-notes/master/images/Chapter-4/593627-20151025201151427-127726802.png)  
当JavaScript代码执行的时候，第一个进入的总是默认的Global Execution Context，所以说它总是在ECS的最底部.  

对于每个Execution Context都有三个重要的属性，变量对象（Variable object，VO），作用域链（Scope chain）和this。这三个属性跟代码运行的行为有很重要的关系，下面会一一介绍.

当然，除了这三个属性之外，根据实现的需要，Execution Context还可以有一些附加属性.  
![](https://raw.githubusercontent.com/zheng782912/Javascript-study-notes/master/images/Chapter-4/593627-20151025201152849-1821016303.png)
